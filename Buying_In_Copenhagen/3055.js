(self.webpackChunklite=self.webpackChunklite||[]).push([[3055],{39186:(e,n,t)=>{"use strict";t.d(n,{r:()=>s});var i=t(319),a=t.n(i),o=t(28233),l=t(76992),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardEditorWriterButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat(a()(o.x.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()(l.JP.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardReaderButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat(a()(l.JP.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardOverflowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"TruncatedPostCardEditorWriterButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TruncatedPostCardReaderButton_post"}}]}}].concat(a()(r.definitions),a()(d.definitions))}},14345:(e,n,t)=>{"use strict";t.d(n,{A:()=>Q});var i=t(67294),a=t(67154),o=t.n(a),l=t(63038),r=t.n(l),d=t(12291),s=t(93653),u=t(35848),c=t(53962),m=t(63564),p=t(71245),k=t(965),v=t(78820),f=t(73232),S=t(76532),b=t(1932),N=t(32262),C=t(57469),E=t(7157),h=t(29169),y=t(92528),P=t(80362),g=t(82318),F=t(12861),w=t(98024),T=t(6688),I=t(14391),D=t(65347),V=t(67297),x=t(93394),_=t(39171),R=t(51064),O=t(55573),M=t(27952),A=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},L=function(e){var n=e.post,t=e.publisherContext,a=e.isEditor,l=e.isWriter,L=e.creator,j=(0,T.I)(),U=(0,V.v9)((function(e){return e.config.authDomain})),B=n.id,K=n.collection,Q=n.responseDistribution,q=n.visibility,J=n.mediumUrl,W=n.allowResponses,H=(0,S.H)().value,z=null==H?void 0:H.id,G=null==L?void 0:L.id,$=(0,b.T)(n).viewerEdge,X=K||{id:"",name:""},Z=X.id,Y=X.name,ee=(0,R.O)(!1),ne=r()(ee,3),te=ne[0],ie=ne[1],ae=ne[2],oe=(0,v.n_)(n,t),le=r()(oe,2),re=le[0],de=le[1],se=i.useState(""),ue=r()(se,2),ce=ue[0],me=ue[1],pe=i.useCallback((function(){ae(),de().then((function(e){var n=e.errors;n&&n.length&&n[0].message?me(n[0].message):window.location.reload()}))}),[ae,de,me]),ke=(0,p.yb)(n),ve=(0,R.O)(!1),fe=r()(ve,3),Se=fe[0],be=fe[1],Ne=fe[2],Ce=i.useCallback((function(){ke(K).then((function(){return window.location.reload()}))}),[Z,ke]),Ee=(0,s.j)(B),he=r()(Ee,1)[0],ye=(0,R.O)(!1),Pe=r()(ye,3),ge=Pe[0],Fe=Pe[1],we=Pe[2],Te=i.useCallback((function(){he().then((function(){return window.location.reload()}))}),[he]),Ie=Q===I.Et.DISTRIBUTED,De=(0,R.O)(!1),Ve=r()(De,3),xe=Ve[0],_e=Ve[1],Re=Ve[2],Oe={buttonStyle:"ERROR",cancelText:"Cancel"},Me="truncatedPostCardEditorWriterMenu",Ae="Delete story".concat(Ie?" and response":""),Le=Ie?f.Q:"Are you sure you want to delete this story?",je="LOCKED"===q,Ue="User"===t&&l||"Collection"===t&&a,Be=(0,d.I0)(),Ke=i.useCallback((function(e){return Be((0,D.at)(e))}),[Be]),Qe=(0,V.b$)((function(e){return e.multiVote.clapsPerPost})),qe=(0,O.l)(Qe,n,$),Je=qe.clapCount,We=qe.viewerClapCount,He=(0,k.CP)();return i.createElement(i.Fragment,null,i.createElement(y.Q,o()({},Oe,{isVisible:Se,onConfirm:Ce,hide:Ne,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",Y,"?"),i.createElement(y.Q,o()({},Oe,{isVisible:ge,onConfirm:Te,hide:we,titleText:Ae,confirmText:"Delete",isDestructiveAction:!0}),Le),i.createElement(y.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:xe,onConfirm:function(){var e=(0,M.d0A)(U,B);window.location.replace(e)},hide:Re,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},f.t),i.createElement(P.J,{ariaId:Me,hide:ae,isVisible:te,popoverRenderFn:function(){return i.createElement(N.mX,null,i.createElement(N.Sl,null,Ie?i.createElement(g.r,{linkStyle:"SUBTLE",onClick:(0,_.B)(ae,_e)},"Edit story"):i.createElement(g.r,{linkStyle:"SUBTLE",href:(0,M.d0A)(U,B)},"Edit story")),(a||l&&"User"===t)&&i.createElement(N.Sl,null,i.createElement(g.r,{onClick:pe},re?"Unpin":"Pin"," story")),i.createElement(N.oK,null),i.createElement(N.Sl,null,i.createElement(g.r,{href:(0,M.KIb)(U,B)},"Story settings")),i.createElement(N.Sl,null,i.createElement(g.r,{href:(0,M.T0G)(U,B)},"Story stats")),je&&J&&(null==$?void 0:$.shareKey)&&i.createElement(c.$,{post:n,shareKey:null==$?void 0:$.shareKey}),i.createElement(N.oK,null),Ue?i.createElement(m.r,{hidePopover:ae,postId:n.id,allowResponses:W}):null,Z&&i.createElement(N.Sl,null,i.createElement(g.r,{onClick:be},"Remove story from publication")),l&&i.createElement(N.Sl,null,i.createElement(g.r,{onClick:(0,_.B)(ae,Fe)},"Delete story")),a&&!l&&i.createElement(i.Fragment,null,i.createElement(N.oK,null),z&&Je&&We&&We>0?i.createElement(N.Sl,null,i.createElement(g.r,{onClick:function(){return He(n,(null==H?void 0:H.id)||"",-We,$),Ke({postId:n.id,clapCount:Je-We,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void ae()}},"Undo applause for this post")):null,i.createElement(h.z,{targetUserId:G,postId:n.id,hidePopover:ae,viewerId:z}),i.createElement(u.q,{hidePopover:ae,creator:L}),i.createElement(C.F,{hidePopover:ae,creator:L,viewer:H}),i.createElement(E.j,{hidePopover:ae,creator:L,viewer:H})))}},i.createElement(g.r,{ariaControls:Me,ariaExpanded:te?"true":"false",ariaLabel:"More options",onClick:ie},i.createElement(x.Z,{className:j(A)}))),i.createElement(F.F,{isVisible:!!ce,hide:function(){return me("")},duration:5e3},i.createElement(w.F,{scale:"M"},ce)))},j=t(36511),U=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},B=function(e){var n=e.post,t=e.viewer,a=(0,T.I)(),o=n.creator,l=null==o?void 0:o.id,s=(0,R.O)(!1),c=r()(s,3),m=c[0],p=c[1],v=c[2],f="truncatedPostCardReaderMenu",S=(0,j.r)().viewerId,y=(0,b.T)(n).viewerEdge,F=(0,d.I0)(),w=i.useCallback((function(e){return F((0,D.at)(e))}),[F]),I=(0,V.b$)((function(e){return e.multiVote.clapsPerPost})),_=(0,O.l)(I,n,y),M=_.clapCount,A=_.viewerClapCount,L=(0,k.CP)();if(!l)return null;var B=S&&M&&A&&A>0;return i.createElement(P.J,{ariaId:f,hide:v,isVisible:m,popoverRenderFn:function(){return i.createElement(N.mX,null,!!B&&i.createElement(N.Sl,null,i.createElement(g.r,{onClick:function(){return L(n,(null==t?void 0:t.id)||"",-A,y),w({postId:n.id,clapCount:M-A,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void v()}},"Undo applause for this post")),i.createElement(h.z,{targetUserId:l,postId:n.id,hidePopover:v,viewerId:S}),i.createElement(u.q,{hidePopover:v,creator:o}),i.createElement(C.F,{hidePopover:v,creator:o,viewer:t}),i.createElement(E.j,{hidePopover:v,creator:o,viewer:t}))}},i.createElement(g.r,{ariaControls:f,ariaExpanded:m?"true":"false",ariaLabel:"More options",onClick:p},i.createElement(x.Z,{className:a(U)})))},K=t(73891),Q=function(e){var n=e.post,t=e.publisherContext,a=(0,S.H)().value,o=(0,K.gY)(n.collection).viewerEdge,l=!(null==o||!o.isEditor),r=n.creator,d=(null==a?void 0:a.id)===(null==r?void 0:r.id);return a?l||d?i.createElement(L,{post:n,isEditor:l,isWriter:d,publisherContext:t,creator:r}):i.createElement(B,{post:n,viewer:a}):null}},40917:(e,n,t)=>{"use strict";t.d(n,{e:()=>m});var i=t(59713),a=t.n(i),o=t(4743),l=t(14391),r=t(43198);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=function(e,n){var t;return n?s(s({},e),{},{markups:[{anchorType:l.yG.LINK,type:l.Jh.A,start:0,end:(null==e||null===(t=e.text)||void 0===t?void 0:t.length)||0,href:n,userId:null,linkMetadata:null}]}):e},c=function(e,n){return n?s(s({},e),{},{href:n}):e},m=function(e,n){var t,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null!==(t=(0,o.LI)(e).titleIndex)&&void 0!==t?t:(0,r.s)(e,r.j);return e.map((function(e,t){return i&&e.type===l.NJ.IMG?c(e,n):t===a?u(e,n):e}))}},30570:(e,n,t)=>{"use strict";t.d(n,{sK:()=>k,L0:()=>v,q9:()=>f});var i=t(28655),a=t.n(i),o=t(63038),l=t.n(o),r=t(71439),d=t(67294),s=t(73788),u=t(53976),c=t(57612);function m(){var e=a()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=d.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){}}),k=function(){return d.useContext(p)},v=function(e){var n=e.children,t=d.useState(null),i=l()(t,2),a=i[0],o=i[1],r=d.useState(!1),c=l()(r,2),m=c[0],k=c[1],v=d.useState(null),f=l()(v,2),S=f[0],b=f[1],N=(0,u.VB)({name:"enable_inline_expansion",placeholder:null});return d.createElement(p.Provider,{value:{expandedPostId:a,setExpandedPostId:o,postInView:m,setPostInView:k,expandedPost:S,setExpandedPost:b}},d.createElement(s.k,{post:S,preload:!!N},n))},f=(0,r.Ps)(m(),c.w)},76992:(e,n,t)=>{"use strict";t.d(n,{JP:()=>l});var i=t(319),a=t.n(i),o=t(36896),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}}].concat(a()(o.U.definitions))};[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ClapMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numClaps"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clap"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"numClaps"},value:{kind:"Variable",name:{kind:"Name",value:"numClaps"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_viewerEdge"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_viewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PostViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}}]),a()(l.definitions))},36896:(e,n,t)=>{"use strict";t.d(n,{U:()=>a});var i=t(319),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostVotersNetwork_post"}}]}}].concat(t.n(i)()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostVotersNetwork_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"recommenders"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]))}},28233:(e,n,t)=>{"use strict";t.d(n,{x:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},29577:(e,n,t)=>{"use strict";t.d(n,{L:()=>l});var i=t(68356),a=t.n(i),o=t(19725),l=a()({loader:function(){return Promise.all([t.e(8342),t.e(8543),t.e(5402),t.e(9590),t.e(3913),t.e(7417)]).then(t.bind(t,55358))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[55358]},loading:function(){return null},render:(0,o.n)("ThreadedResponsesSidebar")})},73788:(e,n,t)=>{"use strict";t.d(n,{k:()=>u});var i=t(63038),a=t.n(i),o=t(67294),l=t(49486),r=t(29577),d=t(70586),s=t(92214),u=function(e){var n=e.children,t=e.post,i=e.preload,u=void 0===i||i,c=o.useState(void 0),m=a()(c,2),p=m[0],k=m[1],v=o.useCallback((function(e){return function(n){k(n),e()}}),[]);return o.createElement(d.E,{preload:u},(function(e){var i=e.showPreviousSidebar,a=e.hasLoaded,d=e.initialSidebarRender,u=e.isVisible,c=e.continueThisThreadPosts,m=e.openSidebar,f=e.cleanupSidebar;return o.createElement(l.Q.Provider,{value:{openSidebarToRespondToHighlight:v(m)}},!!t&&a&&o.createElement(r.L,{isResponsesSidebarVisible:u&&0===c.length,parentPost:t,inResponseToQuote:p,setInResponseToQuote:k,showPreviousSidebar:i,cleanupSidebar:f,initialSidebarRender:!!d.current}),!!t&&a&&c.map((function(e,n,a){var l=(0,s.iI)(n);return o.createElement(r.L,{key:t.id,isResponsesSidebarVisible:u&&n===a.length-1,parentPost:t,inResponseToQuote:p,setInResponseToQuote:k,continueThisThreadPost:e,continueThisThreadPostDepth:l,showPreviousSidebar:i,cleanupSidebar:f,initialSidebarRender:!!d.current})})),n)}))}},70586:(e,n,t)=>{"use strict";t.d(n,{E:()=>v});var i=t(319),a=t.n(i),o=t(63038),l=t.n(o),r=t(38125),d=t.n(r),s=t(67294),u=t(29577),c=t(72393),m=t(77180),p=t(27108),k=t(8403),v=function(e){var n=e.preload,t=e.children,i=s.useState(!1),o=l()(i,2),r=o[0],v=o[1],f=(0,m.F)(),S=!!(0,k.Wd)("responsesOpen"),b=s.useState(!1),N=l()(b,2),C=N[0],E=N[1],h=s.useRef(!0),y=s.useRef(0),P=s.useState(!1),g=l()(P,2),F=g[0],w=g[1],T=s.useCallback((function(){return E(!0)}),[]),I=s.useState([]),D=l()(I,2),V=D[0],x=D[1],_=s.useCallback((function(e){h.current=!1,x([].concat(a()(V),[e]))}),[V]),R=s.useCallback((function(){x(d()(V))}),[V]),O=s.useCallback((function(){E(!1),x([]),h.current=!0}),[]);s.useEffect((function(){w(!0),E(S)}),[S]);var M=function(){window.innerWidth<f.breakpoints.md&&v(!0)};return s.useEffect((function(){return M(),p.V6.on("resize",M),function(){return p.V6.off("resize",M)}}),[]),s.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return r&&null!=t&&t.style&&(C?(t.style.top="-".concat(y.current,"px"),y.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=y.current)),function(){r&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=y.current)}}),[C]),s.useEffect((function(){n&&u.L.preload()}),[n]),s.createElement(c.f.Provider,{value:{addContinueThisThreadSidebar:_,openSidebar:T,closeSidebar:O}},t({showPreviousSidebar:R,hasLoaded:F,initialSidebarRender:h,isVisible:C,continueThisThreadPosts:V,openSidebar:T,cleanupSidebar:O}))}},66210:(e,n,t)=>{"use strict";t.d(n,{V:()=>v,k:()=>f});var i=t(28655),a=t.n(i),o=t(23493),l=t.n(o),r=t(71439),d=t(67294),s=t(95760),u=t(51512),c=t(27108),m=t(8403),p=t(21146);function k(){var e=a()(["\n  fragment PostScrollTracker_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n  }\n"]);return k=function(){return e},e}function v(e,n,t,i){var a=(0,s.Av)(),o=(0,u.pK)(),r=(0,m.he)(),k=(0,u.Qi)(),v=Date.now(),f=null,S=d.useCallback(l()((function(){if(e.current){var i=(0,p.L6)(e.current);if((0,p.pn)(i)){var l=Date.now(),d=(0,p.tM)(i),s=(0,p.UO)(),u=(0,p.t_)(),c=Math.round(d.top),m=Math.round(d.top+d.height),S=s.top,b=s.top+u.height,N=s.height,C={postIds:[n.id],collectionIds:[n.collection?n.collection.id:""],sequenceIds:[n.sequence?n.sequence.sequenceId:""],sources:t?["post_page"]:[k],tops:[c],bottoms:[m],areFullPosts:[!0],loggedAt:l,timeDiff:null!==f?Math.round(l-f):0,scrollTop:S,scrollBottom:b,scrollableHeight:N,viewStartedAt:v},E={referrer:r,referrerSource:o};t?a.event("post.streamScrolled",C,E):a.event("post.streamScrolled",C),f=l}}}),1e3),[n,t]);d.useEffect((function(){S();var e=null!=i&&i.current?(0,c.jC)(null==i?void 0:i.current):c.V6;return e.on("scroll_end",S),function(){e.off("scroll_end",S)}}),[S])}var f=(0,r.Ps)(k())},32261:(e,n,t)=>{"use strict";t.d(n,{O1:()=>o}),t(59713);var i=t(67294),a=i.createContext(null),o=function(e){var n=e.event,t=e.children;return i.createElement(a.Provider,{value:{event:n}},t)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3055.4bed0e2d.chunk.js.map