(self.webpackChunklite=self.webpackChunklite||[]).push([[3769],{93653:(t,n,e)=>{"use strict";e.d(n,{j:()=>u});var o=e(28655),r=e.n(o),i=e(71439),s=e(46829);function a(){var t=r()(["\n  mutation DeletePostMutation($targetPostId: ID!) {\n    deletePost(targetPostId: $targetPostId)\n  }\n"]);return a=function(){return t},t}var l=(0,i.Ps)(a()),u=function(t){var n=t?{variables:{targetPostId:t}}:{};return(0,s.useMutation)(l,n)}},53962:(t,n,e)=>{"use strict";e.d(n,{$:()=>d});var o=e(28655),r=e.n(o),i=e(71439),s=e(67294),a=e(32262),l=e(76579),u=e(96879),c=e(27952);function p(){var t=r()(["\n  fragment CopyFriendLinkMenuItem_post on Post {\n    id\n  }\n"]);return p=function(){return t},t}var d=function(t){var n=t.post,e=t.shareKey;return n&&e?s.createElement(a.Sl,null,s.createElement(l.b,{url:(0,u.Rk)((0,c.jVf)(n),{sk:e}),linkStyle:"SUBTLE"},(function(t){return t?"Copied!":"Copy Friend Link"}))):null};(0,i.Ps)(p())},63564:(t,n,e)=>{"use strict";e.d(n,{r:()=>h});var o=e(63038),r=e.n(o),i=e(67294),s=e(28655),a=e.n(s),l=e(71439),u=e(80439),c=e(12291),p=e(85277);function d(){var t=a()(["\n  mutation PostAllowResponsesMutation($targetPostId: ID!, $allowResponses: Boolean!) {\n    setPostAllowResponses(targetPostId: $targetPostId, allowResponses: $allowResponses) {\n      id\n      allowResponses\n    }\n  }\n"]);return d=function(){return t},t}var f=(0,l.Ps)(d()),m=(0,c.$j)()((function(t){var n=t.children,e=t.dispatch,o=t.onCompleted,r=t.targetPostId;return i.createElement(u.mm,{mutation:f,onCompleted:function(){e((0,p.Dx)({message:"Responses are now hidden for this post."})),o&&o()},variables:{targetPostId:r,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:r,allowResponses:!1}}},(function(t){return n({mutate:t})}))})),v=(0,c.$j)()((function(t){var n=t.children,e=t.dispatch,o=t.onCompleted,r=t.targetPostId;return i.createElement(u.mm,{mutation:f,onCompleted:function(){e((0,p.Dx)({message:"Responses are now shown for this post."})),o&&o()},variables:{targetPostId:r,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:r,allowResponses:!0}}},(function(t){return n({mutate:t})}))})),g=e(72345),C=e(32262),P=e(82318),y=e(51064),h=function(t){var n=t.hidePopover,e=t.postId,o=t.allowResponses,s=(0,y.O)(!1),a=r()(s,3),l=a[0],u=a[1],c=a[2],p=function(){c(),n()};return i.createElement(i.Fragment,null,i.createElement(m,{targetPostId:e},(function(t){var n=t.mutate;return i.createElement(g.w,{onConfirm:n,isVisible:l,hide:p,entityTypename:"Post"})})),i.createElement(v,{targetPostId:e},(function(t){var n=t.mutate;return i.createElement(C.Sl,null,i.createElement(P.r,{onClick:function(){o?u():n()}},o?"Hide responses":"Show responses"))})))}},86948:(t,n,e)=>{"use strict";e.d(n,{z:()=>P,e:()=>y});var o=e(28655),r=e.n(o),i=e(71439),s=e(67294),a=e(66249),l=e(46101),u=e(76532),c=e(62181),p=e(33914),d=e(6688),f=e(14391),m=e(67297),v=e(353),g=e(27952);function C(){var t=r()(["\n  fragment BookmarkButton_post on Post {\n    visibility\n    ...SusiClickable_post\n    ...AddToCatalogBookmarkButton_post\n  }\n  ","\n  ","\n"]);return C=function(){return t},t}var P=(0,i.Ps)(C(),c.qU,a.GD);function y(t){var n=t.post,e=t.withReadingListTooltip,o=void 0===e||e,r=t.susiEntry,i=n.id,C=n.visibility,P=(0,d.I)(),y=(0,m.v9)((function(t){return t.config.authDomain})),h=(0,u.H)(),b=h.value;return h.loading||C===f.Wn.UNLISTED?null:b?s.createElement(a.o0,{kind:f.ej.POST,target:n}):s.createElement(p._,{isVisible:o,placement:"top",targetDistance:10,tooltipText:"Bookmark story"},s.createElement(c.R9,{post:n,operation:"register",actionUrl:(0,g.XET)(y,i),susiEntry:r},s.createElement(v.Z,{className:P(l.K)})))}},71245:(t,n,e)=>{"use strict";e.d(n,{Lf:()=>v,h3:()=>g,yb:()=>C});var o=e(63038),r=e.n(o),i=e(28655),s=e.n(i),a=e(71439),l=e(46829),u=e(67294),c=e(14391);function p(){var t=s()(["\n  mutation RejectPostFromPubMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      collection {\n        id\n      }\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return p=function(){return t},t}function d(){var t=s()(["\n  mutation ManageCollectionPostStatusMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return d=function(){return t},t}var f=(0,a.Ps)(d()),m=(0,a.Ps)(p()),v=function(t){var n=(0,l.useMutation)(f),e=r()(n,1)[0];return(0,u.useCallback)((function(n){return e({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:t.id,status:c.Zj.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:t.id,statusForCollection:c.Zj.PENDING,pendingCollection:n}}})}),[t])},g=function(t){var n=(0,l.useMutation)(f),e=r()(n,1)[0];return(0,u.useCallback)((function(n){return e({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:t.id,status:c.Zj.APPROVED}})}),[t])},C=function(t){var n=(0,l.useMutation)(m),e=r()(n,1)[0];return(0,u.useCallback)((function(n){return e({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:t.id,status:c.Zj.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:t.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(t){if(t.errors&&t.errors[0])throw t.errors[0];return t}))}),[t])}},965:(t,n,e)=>{"use strict";e.d(n,{JP:()=>y,CP:()=>I});var o=e(59713),r=e.n(o),i=e(63038),s=e.n(i),a=e(28655),l=e.n(a),u=e(71439),c=e(46829),p=e(67294),d=e(58006),f=e(94945);function m(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function v(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?m(Object(e),!0).forEach((function(n){r()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function g(){var t=l()(["\n  mutation ClapMutation($targetPostId: ID!, $userId: ID!, $numClaps: Int!) {\n    clap(targetPostId: $targetPostId, userId: $userId, numClaps: $numClaps) {\n      viewerEdge {\n        ...ClapMutation_viewerEdge\n      }\n      ...ClapMutation_post\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return t},t}function C(){var t=l()(["\n  fragment ClapMutation_viewerEdge on PostViewerEdge {\n    __typename\n    id\n    clapCount\n  }\n"]);return C=function(){return t},t}function P(){var t=l()(["\n  fragment ClapMutation_post on Post {\n    __typename\n    id\n    clapCount\n    ...MultiVoteCount_post\n  }\n  ","\n"]);return P=function(){return t},t}var y=(0,u.Ps)(P(),d.U),h=(0,u.Ps)(C()),b=(0,u.Ps)(g(),y,h),I=function(){var t=(0,c.useMutation)(b),n=s()(t,1)[0];return(0,p.useCallback)((function(t,e,o,r){return n({variables:{targetPostId:t.id,userId:e,numClaps:o},optimisticResponse:{clap:v(v({__typename:"Post"},t),{},{clapCount:t.clapCount+o,viewerEdge:{__typename:"PostViewerEdge",id:(0,f.Q)(t.id,e),clapCount:o}})},update:function(n,e){var i,s=null==e||null===(i=e.data)||void 0===i?void 0:i.clap;if(s){var a=n.readFragment({id:"Post:".concat(s.id),fragment:y,fragmentName:"ClapMutation_post"});n.writeFragment({id:"Post:".concat(s.id),fragment:y,fragmentName:"ClapMutation_post",data:v(v({},a),{},{clapCount:t.clapCount+o,viewerClapCount:((null==r?void 0:r.clapCount)||0)+o})})}}})}),[])}},58006:(t,n,e)=>{"use strict";e.d(n,{_:()=>j,U:()=>V});var o=e(28655),r=e.n(o),i=e(71439),s=e(67294),a=e(42711),l=e(319),u=e.n(l),c=e(82492),p=e.n(c),d=e(80439),f=e(12237),m=e(23025),v=e(31001),g=e(85677);function C(){var t=r()(["\n  query PostVotersDialogQuery($postId: ID!, $pagingOptions: PagingOptions) {\n    post(id: $postId) {\n      id\n      title\n      clapCount\n      voterCount\n      voters(paging: $pagingOptions) {\n        items {\n          user {\n            id\n            ...UserFollowButton_user\n            ...Voter_user\n          }\n          clapCount\n        }\n        pagingInfo {\n          next {\n            page\n          }\n        }\n      }\n      ...UserFollowButton_post\n    }\n  }\n  ","\n  ","\n  ","\n"]);return C=function(){return t},t}var P=function(t){var n=t.post,e=t.hide,o=t.isVisible,r=t.fetchMore;if(!n)return null;var i=n.title,a=n.voters,l=n.clapCount,u=n.voterCount;return s.createElement(f.x,{isVisible:o,fetchMore:r,hide:e,title:i,clapCount:l,voterCount:u,voters:a?a.items.map((function(t){var e=t.user,o=t.clapCount;return e&&s.createElement(m.a,{user:e,clapCount:o,key:e.id,followButton:s.createElement(v.Bv,{buttonSize:"SMALL",post:n,user:e,susiEntry:"follow_list"})})})):null})};function y(t){var n=t.postId,e=t.isVisible,o=t.hide;return e?s.createElement(d.AE,{ssr:!1,query:h,variables:{postId:n,pagingOptions:{limit:10}}},(function(t){var n,r=t.data,i=(r=void 0===r?{}:r).post,a=t.loading,l=t.error,c=t.fetchMore;if(a)return s.createElement(g.T,null);if(l||null==i||!i.voters)return null;var d=i.voters.pagingInfo&&i.voters.pagingInfo.next;if(d){var f={page:d.page};n=function(){return c({variables:{pagingOptions:f},updateQuery:function(t,n){var e,o,r,i,s,a,l=n.fetchMoreResult;return p()({},l,{post:{voters:{items:[].concat(u()(null!==(e=null==t||null===(o=t.post)||void 0===o||null===(r=o.voters)||void 0===r?void 0:r.items)&&void 0!==e?e:[]),u()(null!==(i=null==l||null===(s=l.post)||void 0===s||null===(a=s.voters)||void 0===a?void 0:a.items)&&void 0!==i?i:[]))}}})}})}}return s.createElement(P,{hide:o,fetchMore:n,post:i,isVisible:e})})):null}var h=(0,i.Ps)(C(),m.J,v.sj,v.S$),b=e(23450),I=e.n(b),w=e(1932),_=e(42933),E=e(82318),S=e(98024),$=e(27390),A=e(11642);function M(){var t=r()(["\n  fragment PostVotersNetwork_post on Post {\n    id\n    voterCount\n    recommenders {\n      name\n    }\n  }\n"]);return M=function(){return t},t}var k=function(t){var n,e,o=t.post,r=t.showVoters,i=(0,w.T)(o).viewerEdge,a=null!==(n=null===(e=o.recommenders)||void 0===e?void 0:e.map((function(t){return t.name})).filter(A.b))&&void 0!==n?n:[],l=(null!=i&&i.clapCount?["you"]:[]).concat(a).slice(0,2);if(!l.length)return null;var u=(o.voterCount||0)-l.length,c=l.join(u>0?", ":" and "),p="".concat(l.length>1?",":""," and"),d=I()("other",u),f=u>0?"".concat(p," ").concat((0,$.rR)(u)," ").concat(d):"";return s.createElement(_.x,{sm:{display:"none"}},s.createElement(E.r,{onClick:r},s.createElement(S.F,{scale:"S"},"Applause from ".concat(c).concat(f))))},R=(0,i.Ps)(M()),D=e(19464);function O(){var t=r()(["\n  fragment MultiVoteCount_post on Post {\n    id\n    ...PostVotersNetwork_post\n  }\n  ","\n"]);return O=function(){return t},t}function j(t){var n=t.clapCount,e=t.hasLabel,o=void 0!==e&&e,r=t.showFullNumber,i=void 0!==r&&r,l=t.post,u=t.shouldShowNetwork,c=t.hasDialog,p=void 0!==c&&c,d=t.shouldShowResponsiveLabelText,f=void 0!==d&&d,m=t.shouldHideClapsText,v=void 0!==m&&m,g=l.id;if(!(n>0))return null;var C=function(t){var e=t.showVoters;return s.createElement(a.$,{showVoters:e,hasLabel:o,showFullNumber:i,shouldShowResponsiveLabelText:f,shouldHideClapsText:v,label:u&&e?s.createElement(k,{showVoters:e,post:l}):null,clapCount:n})};return p&&g?s.createElement(D.B,null,(function(t){var n=t.isVisible,e=t.show,o=t.hide;return s.createElement(s.Fragment,null,s.createElement(C,{showVoters:e}),s.createElement(y,{isVisible:n,hide:o,postId:g}))})):s.createElement(C,null)}var V=(0,i.Ps)(O(),R)},78820:(t,n,e)=>{"use strict";e.d(n,{Zu:()=>I,n_:()=>h,xt:()=>C,KQ:()=>P,In:()=>y,PB:()=>b});var o=e(63038),r=e.n(o),i=e(28655),s=e.n(i),a=e(46829),l=e(71439),u=e(67294);function c(){var t=s()(["\n  mutation postSetPinnedByCreatorAt($postId: ID!, $isPinned: Boolean!) {\n    postSetPinnedByCreatorAt(targetPostId: $postId, isPinned: $isPinned) {\n      __typename\n      ... on Post {\n        id\n        pinnedByCreatorAt\n      }\n    }\n  }\n"]);return c=function(){return t},t}function p(){var t=s()(["\n  mutation setPinnedAt($postId: ID!, $collectionId: ID!, $pinnedAt: Boolean!) {\n    __typename\n    setPinnedAt(targetPostId: $postId, targetCollectionId: $collectionId, pinnedAt: $pinnedAt) {\n      __typename\n      ... on Post {\n        id\n        collection {\n          id\n        }\n        pendingCollection {\n          id\n        }\n        pinnedAt\n      }\n    }\n  }\n"]);return p=function(){return t},t}var d=(0,l.Ps)(p()),f=(0,l.Ps)(c()),m=e(61250),v=e(27952);function g(){var t=s()(["\n  fragment useIsPinnedInContext_post on Post {\n    id\n    collection {\n      id\n    }\n    pendingCollection {\n      id\n    }\n    pinnedAt\n    pinnedByCreatorAt\n  }\n"]);return g=function(){return t},t}var C=(0,l.Ps)(g()),P=function(t){var n=t.id,e=t.collection,o=t.pendingCollection,i=t.pinnedAt,s=(e||o||{id:""}).id,l=(0,a.useMutation)(d,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:e,pendingCollection:o,pinnedAt:i?0:Date.now()}}}),c=r()(l,1)[0],p=u.useCallback((function(){return c({variables:{postId:n,collectionId:s,pinnedAt:!i}})}),[n,s,i,c]);return[i,p]},y=function(t){var n=t.id,e=t.pinnedByCreatorAt,o=(0,a.useMutation)(f,{optimisticResponse:{postSetPinnedByCreatorAt:{__typename:"Post",id:n,pinnedByCreatorAt:e?0:Date.now()}}}),i=r()(o,1)[0],s=u.useCallback((function(){return i({variables:{postId:n,isPinned:!e}})}),[n,i,e]);return[e,s]},h=function(t,n){var e=P(t),o=r()(e,2),i=o[0],s=o[1],a=y(t),l=r()(a,2),c=l[0],p=l[1],d=u.useCallback((function(){return"Collection"===n?s():p()}),[n,s,p]);return["Collection"===n?i:c,d]},b=function(t,n){var e="Collection"===t.__typename?t.slug:null,o=(0,m.di)("ShowCollectionHome",e?{collectionSlug:e}:{collectionSlug:""});return"Collection"===t.__typename?o:"User"===t.__typename&&t.username?(0,v.AWr)(t,n):""},I=function(t){switch(t.__typename){case"Collection":return"Publication";case"User":return"Author";default:return"Publisher"}}},72345:(t,n,e)=>{"use strict";e.d(n,{w:()=>s});var o=e(67294),r=e(92214),i=e(92528),s=function(t){var n=t.onConfirm,e=t.isVisible,s=t.hide,a=t.entityTypename,l=(0,r.Pm)(a);return o.createElement(i.Q,{onConfirm:n,isVisible:e,hide:s,titleText:"Hide responses",confirmText:"Confirm",isDestructiveAction:!1},"People will still be able to respond, but the link to see responses will not be displayed at the bottom of your ",l,".")}},73232:(t,n,e)=>{"use strict";e.d(n,{Q:()=>o,t:()=>r});var o="This story is also a response to another story. Are you sure you want to delete this story?",r="This story is also a response to another story. Any edits are applied to both."},39171:(t,n,e)=>{"use strict";function o(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==e.return||e.return()}finally{if(l)throw s}}}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}e.d(n,{B:()=>i});var i=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(){var t,e=o(n);try{for(e.s();!(t=e.n()).done;)(0,t.value)()}catch(t){e.e(t)}finally{e.f()}}}},55573:(t,n,e)=>{"use strict";function o(t,n,e){return!!n&&t[n.id]||{clapCount:(null==n?void 0:n.clapCount)||0,viewerClapCount:(null==e?void 0:e.clapCount)||0,viewerHasClappedSinceFetch:!1}}e.d(n,{l:()=>o})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3769.798ded37.chunk.js.map